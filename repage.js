!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.page=e()}}(function(){var e,t,n;return function i(e,t,n){function r(o,s){if(!t[o]){if(!e[o]){var f=typeof require=="function"&&require;if(!s&&f)return f(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n?n:t)},c,c.exports,i,e,t,n)}return t[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,n,i){(function(r,a){if(typeof e==="function"&&e.amd){e(["page"],a)}else if(typeof i==="object"){n.exports=a(t("page"))}else{r.repage=a(r.page)}})(this,function(e){var t=this.setImmediate?this.setImmediate:function(e){window.setTimeout(e,0)};function n(t,i){if("function"==typeof t){return n("*",t)}if("function"==typeof i){e(t,i)}else if("string"===typeof t){n.show(t,i)}else{n.start(t)}}n.start=e.start;n.stop=e.stop;n.dispatch=e.dispatch;n.show=function(t,i,r){var a=n.uri(t,i);e.show(a,{},r)};n.replace=function(t,i,r,a){var o=n.uri(t,i);e.replace(o,{},r,a)};n.len=0;n.uri=function(e,t){var i=e.replace(/:([A-Za-z_]+)/g,function(e,n){var i=t[n];delete t[n];return i});if(t&&Object.keys(t).length>0){i+="?"+n.querystring(t)}return i};n.querystring=function(e,t){var i=[],r;if(Array.isArray(e)){for(var a=0,o=e.length;a<o;a++){r=e[a];i.push(n.querystring({"":r},t))}}else if(typeof e==="object"){for(var s in e){if(!e.hasOwnProperty(s))continue;r=e[s];if(typeof r==="undefined")continue;if(t)s=t+"["+s+"]";if(r===null){i.push(s+"=")}else if(typeof r==="object"){i.push(n.querystring(r,s))}else{i.push([s,encodeURIComponent(r)].join("="))}}}return i.join("&")};n.back=function(e,t){if(n.len>0){history.back()}else if(arguments.length>0){n(e,t)}};n.redirect=function(e,i){t(function(){n.replace(e,i)})};var i=e.Context.prototype.pushState;e.Context.prototype.pushState=function(){n.len++;i.apply(this,arguments)};n.page=e;return n})},{page:2}],2:[function(e,t,n){(function(){var e=true;var n="";var i;function r(e,t){if("function"==typeof e){return r("*",e)}if("function"==typeof t){var n=new s(e);for(var i=1;i<arguments.length;++i){r.callbacks.push(n.middleware(arguments[i]))}}else if("string"==typeof e){r.show(e,t)}else{r.start(e)}}r.callbacks=[];r.base=function(e){if(0==arguments.length)return n;n=e};r.start=function(t){t=t||{};if(i)return;i=true;if(false===t.dispatch)e=false;if(false!==t.popstate)window.addEventListener("popstate",u,false);if(false!==t.click)window.addEventListener("click",c,false);if(!e)return;var n=location.pathname+location.search+location.hash;r.replace(n,null,true,e)};r.stop=function(){i=false;removeEventListener("click",c,false);removeEventListener("popstate",u,false)};r.show=function(e,t,n){var i=new o(e,t);if(false!==n)r.dispatch(i);if(!i.unhandled)i.pushState();return i};r.replace=function(e,t,n,i){var a=new o(e,t);a.init=n;if(null==i)i=true;if(i)r.dispatch(a);a.save();return a};r.dispatch=function(e){var t=0;function n(){var i=r.callbacks[t++];if(!i)return a(e);i(e,n)}n()};function a(e){var t=window.location.pathname+window.location.search;if(t==e.canonicalPath)return;r.stop();e.unhandled=true;window.location=e.canonicalPath}function o(e,t){if("/"==e[0]&&0!=e.indexOf(n))e=n+e;var i=e.indexOf("?");this.canonicalPath=e;this.path=e.replace(n,"")||"/";this.title=document.title;this.state=t||{};this.state.path=e;this.querystring=~i?e.slice(i+1):"";this.pathname=~i?e.slice(0,i):e;this.params=[];this.hash="";if(!~this.path.indexOf("#"))return;var r=this.path.split("#");this.path=r[0];this.hash=r[1]||"";this.querystring=this.querystring.split("#")[0]}r.Context=o;o.prototype.pushState=function(){history.pushState(this.state,this.title,this.canonicalPath)};o.prototype.save=function(){history.replaceState(this.state,this.title,this.canonicalPath)};function s(e,t){t=t||{};this.path=e;this.method="GET";this.regexp=f(e,this.keys=[],t.sensitive,t.strict)}r.Route=s;s.prototype.middleware=function(e){var t=this;return function(n,i){if(t.match(n.path,n.params))return e(n,i);i()}};s.prototype.match=function(e,t){var n=this.keys,i=e.indexOf("?"),r=~i?e.slice(0,i):e,a=this.regexp.exec(r);if(!a)return false;for(var o=1,s=a.length;o<s;++o){var f=n[o-1];var u="string"==typeof a[o]?decodeURIComponent(a[o]):a[o];if(f){t[f.name]=undefined!==t[f.name]?t[f.name]:u}else{t.push(u)}}return true};function f(e,t,n,i){if(e instanceof RegExp)return e;if(e instanceof Array)e="("+e.join("|")+")";e=e.concat(i?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,i,r,a,o){t.push({name:r,optional:!!o});n=n||"";return""+(o?"":n)+"(?:"+(o?n:"")+(i||"")+(a||(i&&"([^/.]+?)"||"([^/]+?)"))+")"+(o||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)");return new RegExp("^"+e+"$",n?"":"i")}function u(e){if(e.state){var t=e.state.path;r.replace(t,e.state)}}function c(e){if(1!=p(e))return;if(e.metaKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;var t=e.target;while(t&&"A"!=t.nodeName)t=t.parentNode;if(!t||"A"!=t.nodeName)return;var i=t.getAttribute("href");if(t.pathname==location.pathname&&(t.hash||"#"==i))return;if(t.target)return;if(!h(t.href))return;var a=t.pathname+t.search+(t.hash||"");var o=a+t.hash;a=a.replace(n,"");if(n&&o==a)return;e.preventDefault();r.show(o)}function p(e){e=e||window.event;return null==e.which?e.button:e.which}function h(e){var t=location.protocol+"//"+location.hostname;if(location.port)t+=":"+location.port;return 0==e.indexOf(t)}if("undefined"==typeof t){window.page=r}else{t.exports=r}})()},{}]},{},[1])(1)});